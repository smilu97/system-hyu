# Chatting Server & Client

[About architecture](docs/arch.md)

Made by 김영진, 김정현

서버와 클라이언트 프로그램이 있습니다. (네트워크 통신을 하는 채팅 프로그램이 아닙니다!)

모든 프로그램은 같은 머신안에서 작동하는 것을 원칙으로 하고 있으며 IPC를 이용합니다.

소켓이나 HTTP프로토콜은 사용하지 않습니다. 한 머신안에서, 서버가 작동하고 있다면, 4444를 키값으로 가지는
공유메모리 공간이 생성됩니다. 클라이언트는 서버가 작동하고 있는지 여부를 이 공유메모리 공간의 존재를 가지고 판별합니다.

##How to use

``` sh
make
bin/server
```

make를 이용해 빌드하고, bin폴더안에 있는 server바이너리를 실행시켜서 서버를 먼저 실행시켜야 합니다.

```sh
# make
bin/client
```

make를 실행시키면 서버와 클라이언트 모두가 빌드됩니다. 마찬가지로 bin폴더 안에있는 client바이너리를 실행시켜서 사용할 수 있습니다.

### Broadcasted message room

client에서 b를 입력하게 되면 전체 채팅방으로 이동하게 됩니다. 이 상태에서는 모든 사용자들끼리 대화할 수 있습니다. 대화기록은 서버에 최대 100개까지 저장되며, 그 이상의 채팅 기록이 담겨질 경우 가장 먼저 들어갔던 채팅기록이 하나씩 없어집니다.

나갈 때에는 q!를 입력해서 나갈 수 있습니다.

### Personal message room

client에서 p <pid> 를 입력하게 되면 개인 채팅방으로 이동하게 됩니다. 대상의 pid를 입력해야 하며, 자신의 pid는 프로세스가 실행될 때 화면에 표시됩니다. 이 상태에서는 서로 일대일 채팅이 가능합니다. 여기서는 채팅하는 대상이 바뀔 때 마다 기록이 말소되며, Broadcasted room과 마찬가지로 최대 100개의 메시지가 저장됩니다.

마찬가지로 q!를 입력해서 나갈 수 있습니다.